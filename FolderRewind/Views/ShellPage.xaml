<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="FolderRewind.Views.ShellPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    KeyboardAcceleratorPlacementMode="Hidden">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border x:Name="AppTitleBar"
                Grid.Row="0"
                Height="48"
                Background="Transparent"
            Padding="12,0,12,0"
            KeyboardAcceleratorPlacementMode="Hidden">
            <Grid ColumnSpacing="10" VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <FontIcon Glyph="&#xE8B7;" FontSize="16" Opacity="0.9" />
                <TextBlock Grid.Column="1"
                           x:Uid="ShellPage_TitleBarAppName"
                           Style="{ThemeResource BodyStrongTextBlockStyle}"
                           VerticalAlignment="Center"
                           TextTrimming="CharacterEllipsis" />
            </Grid>
        </Border>

        <!-- 全局 InfoBar 通知区域 -->
        <InfoBar x:Name="GlobalInfoBar"
                 Grid.Row="1"
                 IsOpen="False"
                 IsClosable="True"
                 Margin="12,0,12,8"
                 Closed="GlobalInfoBar_Closed" />

        <NavigationView x:Name="NavView"
                        Grid.Row="2"
                        x:Uid="ShellPage_Header"
                        PaneDisplayMode="Left"
                        IsSettingsVisible="True" 
                        OpenPaneLength="{x:Bind Settings.NavPaneWidth, Mode=OneWay}"
                        IsBackButtonVisible="Visible"
                        SelectionChanged="NavView_SelectionChanged"
                        Loaded="NavView_Loaded"
                        PaneOpened="NavView_PaneOpened"
                        PaneClosed="NavView_PaneClosed"
                BackRequested="NavView_BackRequested"
                KeyboardAcceleratorPlacementMode="Hidden">

            <NavigationView.MenuItems>
                <NavigationViewItem x:Uid="ShellPage_NavHome" Tag="Home">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Home"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem x:Uid="ShellPage_NavManager" Tag="Manager">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Manage"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem x:Uid="ShellPage_NavTasks" Tag="Tasks">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Copy"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem x:Uid="ShellPage_NavHistory" Tag="History">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Clock"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem x:Uid="ShellPage_NavLogs" Tag="Logs">
                    <NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Library"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <Frame x:Name="ContentFrame" />
        </NavigationView>
    </Grid>
</Page>
